<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTech - Tutor Signup</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="light-mode">
    <!-- Light/Dark Mode Toggle -->
    <button class="mode-toggle" id="modeToggle">ðŸŒž</button>

    <nav class="navbar">
        <div class="navbar-left">
            <img src="ht9.png" alt="EduTech Logo" class="logo_img">
            <a href="index.html" class="name">EduTech</a>
        </div>
        <a href="index.html" class="nav-link">Home</a>
        <div class="hamburger" id="hamburger">&#9776;</div>
        <div class="auth-buttons">
            <a href="sign_in.html" class="button_login">Sign In</a>
            <a href="sign_up.html" class="button-neon">Sign Up</a>
        </div>
    </nav>
    
    <div class="sidebar" id="sidebar">
        <ul class="nav-menu">
            <li class="nav-item"><a href="packages.html" class="nav-link">Packages</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Our Difference</a></li>
            <li class="nav-item dropdown">
                <a href="#" class="nav-link">For Tutors &#9662;</a>
                <ul class="dropdown-menu">
                    <li><a href="#">For Tutors</a></li>
                    <li><a href="tutor_signup.html">Create Tutor Profile</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a href="#" class="nav-link">Learning Plans &#9662;</a>
                <ul class="dropdown-menu">
                    <li><a href="#">Plan 1</a></li>
                    <li><a href="#">Plan 2</a></li>
                    <li><a href="#">Plan 3</a></li>
                </ul>
            </li>
            <div class="auth-buttons">
                <a href="sign_in.html" class="button_login">Sign In</a>
                <a href="sign_up.html" class="button-neon">Sign Up</a>
            </div>
        </ul>
    </div>

    <main>
        <div class="form-container">
            <h1>Sign Up as a Tutor</h1>
            <form>
                <!-- Existing fields -->
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" placeholder="Enter your full name" required>
                
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="Enter your email address" required>
                
                <label for="subject">Subjects</label>
                <select id="subject" name="subject" multiple size="4">
                    <option value="math">Mathematics</option>
                    <option value="science">Science</option>
                    <option value="english">English</option>
                    <option value="programming">Programming</option>
                </select>
                
                <label for="bio">Short Bio</label>
                <textarea id="bio" name="bio" rows="4" placeholder="Tell us a little about yourself"></textarea>
            
                <!-- Video introduction field -->
                <label for="video">Video Introduction (2 minutes or less)</label>
                <input type="file" id="video" name="video" accept="video/*" required>
                <small>Please upload a video file no larger than 2 minutes.</small>
            
                <button type="submit">Submit</button>
            </form>            
            <div class="form-footer">
                Already have an account? <a href="sign_in.html">Sign In</a>
            </div>
        </div>
    </main>
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>EduTech</h3>
                <p>Explore personalized learning journeys designed for success.</p>
            </div>
            <div class="footer-section">
                <h3>Social Media</h3>
                <ul>
                    <li><img src="facebook-icon.png" alt="Facebook"> Facebook</li>
                    <li><img src="twitter-icon.png" alt="Twitter"> Twitter</li>
                    <li><img src="instagram-icon.png" alt="Instagram"> Instagram</li>
                    <li><img src="linkedin-icon.png" alt="LinkedIn"> LinkedIn</li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                </ul>
            </div>
            <button class="tutors-login-btn">Tutors Login</button>
        </div>
        <p>&copy; 2024 EduTech. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light-mode';
            document.body.className = savedTheme;
            const modeToggle = document.getElementById('modeToggle');
            modeToggle.textContent = savedTheme === 'dark-mode' ? '\u263D' : '\u2600';

            modeToggle.addEventListener('click', () => {
                if (document.body.classList.contains('light-mode')) {
                    document.body.classList.replace('light-mode', 'dark-mode');
                    modeToggle.textContent = '\u263D';
                    localStorage.setItem('theme', 'dark-mode');
                } else {
                    document.body.classList.replace('dark-mode', 'light-mode');
                    modeToggle.textContent = '\u2600';
                    localStorage.setItem('theme', 'light-mode');
                }
            });

            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('hamburger');

            hamburger.addEventListener('click', () => {
                sidebar.classList.toggle('open');
            });

            document.addEventListener('click', (e) => {
                if (!sidebar.contains(e.target) && !hamburger.contains(e.target)) {
                    sidebar.classList.remove('open');
                }
            });
        });
    </script>
    <script>
        document.getElementById('video').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const video = document.createElement('video');
                video.preload = 'metadata';
                
                video.onloadedmetadata = function() {
                    window.URL.revokeObjectURL(video.src);
                    if (video.duration > 120) {
                        alert('The video exceeds the 2-minute limit. Please upload a shorter video.');
                        event.target.value = ''; // Clear the file input
                    }
                };
                video.src = URL.createObjectURL(file);
            }
        });
    </script>
    <script type="module">
        // Import the Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore.js";
    
        // Firebase configuration (replace with your Firebase project details)
        const firebaseConfig = {
            apiKey: "AIzaSyDn0sCZM1034UP8oAm2L2LHvF440QaVzu4",
            authDomain: "edtech-fc816.firebaseapp.com",
            projectId: "edtech-fc816",
            storageBucket: "edtech-fc816.firebasestorage.app",
            messagingSenderId: "996383017899",
            appId: "1:996383017899:web:d56648f25b527b67f5e0ee",
            measurementId: "G-77Y00DED1T"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        // Form submission handling
        document.querySelector('form').addEventListener('submit', async (event) => {
            event.preventDefault(); // Prevent the default form submission
    
            // Collect form data
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = Array.from(document.getElementById('subject').selectedOptions).map(opt => opt.value);
            const bio = document.getElementById('bio').value;
            const video = document.getElementById('video').files[0];
    
            try {
                // Save form data to Firestore
                await addDoc(collection(db, "tutors"), {
                    name: name,
                    email: email,
                    subject: subject,
                    bio: bio,
                    videoFileName: video ? video.name : null, // Only store the file name
                    timestamp: new Date()
                });
    
                alert('Form submitted successfully!');
                event.target.reset(); // Clear the form after submission
            } catch (error) {
                console.error('Error adding document: ', error);
                alert('An error occurred while submitting the form.');
            }
        });
    </script>       
</body>
</html>
